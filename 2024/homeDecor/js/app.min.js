(()=>{"use strict";let t=!0,e=(e=500)=>{if(t){const o=document.querySelectorAll("[data-lp]");setTimeout((()=>{o.forEach((t=>{t.style.paddingRight=""})),document.body.style.paddingRight="",document.documentElement.classList.remove("lock")}),e),t=!1,setTimeout((function(){t=!0}),e)}},o=(e=500)=>{if(t){const o=document.querySelectorAll("[data-lp]"),s=window.innerWidth-document.body.offsetWidth+"px";o.forEach((t=>{t.style.paddingRight=s})),document.body.style.paddingRight=s,document.documentElement.classList.add("lock"),t=!1,setTimeout((function(){t=!0}),e)}};function s(t){return t.filter((function(t,e,o){return o.indexOf(t)===e}))}new class{constructor(t){this.config=Object.assign({logging:!0},t),this.observer,!document.documentElement.classList.contains("watcher")&&this.scrollWatcherRun()}scrollWatcherUpdate(){this.scrollWatcherRun()}scrollWatcherRun(){document.documentElement.classList.add("watcher"),this.scrollWatcherConstructor(document.querySelectorAll("[data-watch]"))}scrollWatcherConstructor(t){if(t.length){this.scrollWatcherLogging(`Прокинувся, стежу за об'єктами (${t.length})...`),s(Array.from(t).map((function(t){if("navigator"===t.dataset.watch&&!t.dataset.watchThreshold){let e;t.clientHeight>2?(e=window.innerHeight/2/(t.clientHeight-1),e>1&&(e=1)):e=1,t.setAttribute("data-watch-threshold",e.toFixed(2))}return`${t.dataset.watchRoot?t.dataset.watchRoot:null}|${t.dataset.watchMargin?t.dataset.watchMargin:"0px"}|${t.dataset.watchThreshold?t.dataset.watchThreshold:0}`}))).forEach((e=>{let o=e.split("|"),s={root:o[0],margin:o[1],threshold:o[2]},n=Array.from(t).filter((function(t){let e=t.dataset.watchRoot?t.dataset.watchRoot:null,o=t.dataset.watchMargin?t.dataset.watchMargin:"0px",n=t.dataset.watchThreshold?t.dataset.watchThreshold:0;if(String(e)===s.root&&String(o)===s.margin&&String(n)===s.threshold)return t})),c=this.getScrollWatcherConfig(s);this.scrollWatcherInit(n,c)}))}else this.scrollWatcherLogging("Сплю, немає об'єктів для стеження. ZzzZZzz")}getScrollWatcherConfig(t){let e={};if(document.querySelector(t.root)?e.root=document.querySelector(t.root):"null"!==t.root&&this.scrollWatcherLogging(`Эмм... батьківського об'єкта ${t.root} немає на сторінці`),e.rootMargin=t.margin,!(t.margin.indexOf("px")<0&&t.margin.indexOf("%")<0)){if("prx"===t.threshold){t.threshold=[];for(let e=0;e<=1;e+=.005)t.threshold.push(e)}else t.threshold=t.threshold.split(",");return e.threshold=t.threshold,e}this.scrollWatcherLogging("йой, налаштування data-watch-margin потрібно задавати в PX або %")}scrollWatcherCreate(t){this.observer=new IntersectionObserver(((t,e)=>{t.forEach((t=>{this.scrollWatcherCallback(t,e)}))}),t)}scrollWatcherInit(t,e){this.scrollWatcherCreate(e),t.forEach((t=>this.observer.observe(t)))}scrollWatcherIntersecting(t,e){t.isIntersecting?(!e.classList.contains("_watcher-view")&&e.classList.add("_watcher-view"),this.scrollWatcherLogging(`Я бачу ${e.classList}, додав клас _watcher-view`)):(e.classList.contains("_watcher-view")&&e.classList.remove("_watcher-view"),this.scrollWatcherLogging(`Я не бачу ${e.classList}, прибрав клас _watcher-view`))}scrollWatcherOff(t,e){e.unobserve(t),this.scrollWatcherLogging(`Я перестав стежити за ${t.classList}`)}scrollWatcherLogging(t){this.config.logging&&function(t){setTimeout((()=>{window.FLS&&console.log(t)}),0)}(`[Спостерігач]: ${t}`)}scrollWatcherCallback(t,e){const o=t.target;this.scrollWatcherIntersecting(t,o),o.hasAttribute("data-watch-once")&&t.isIntersecting&&this.scrollWatcherOff(o,e),document.dispatchEvent(new CustomEvent("watcherCallback",{detail:{entry:t}}))}}({});let n=!1;function c(t){t?document.documentElement.addEventListener("click",r):document.documentElement.removeEventListener("click",r)}function r(t){const e=t.target;if(e.closest("[data-tooltip-button]")){const t=document.querySelector("[data-tooltip].--show"),o=e.closest("[data-tooltip]");t&&t!==o&&a(t),o.classList.toggle("--show")}else e.closest("[data-tooltip]")||a(document.querySelector("[data-tooltip].--show"))}function a(t){t&&t.classList.remove("--show")}setTimeout((()=>{if(n){let t=new Event("windowScroll");window.addEventListener("scroll",(function(e){document.dispatchEvent(t)}))}}),0),window.addEventListener("load",(function(){const t=window.matchMedia("(any-hover: none)");t.addEventListener("change",(t=>c(t.matches))),c(t.matches),function(){const t=document.querySelectorAll("[data-infinity-line]");if(!t.length)return;t.forEach((t=>{const e=t.children;Array.from(e).forEach((e=>{const o=e.cloneNode(!0);o.setAttribute("aria-hidden",!0),t.append(o)}))}))}(),function(){const t=document.querySelector(".best-sellers__items");if(!t)return;const e=document.querySelector(".header__cart");t.addEventListener("click",(t=>{const o=t.target;if(o.closest(".card-seller__card")){const t=function(t,e=!0){const o=t.cloneNode(e);return o.style.cssText=`\n\t\tposition: fixed;\n\t\tleft: ${t.getBoundingClientRect().left}px;\n\t\ttop: ${t.getBoundingClientRect().top}px;\n\t\twidth: ${t.offsetWidth}px;\n\t\theight: ${t.offsetHeight}px;\n\t\ttransition: left 0.5s, top 0.5s, width 0.5s, height 0.5s, opacity 0.9s;\n\t\tz-index: 52;\n\t\topacity: 0.5;\n\t\toverflow:hidden;\n\t\tpointer-events: none;\n\t`,o}(o.closest(".card-seller").querySelector(".card-seller__preview"));document.body.append(t),t.style.left=`${e.getBoundingClientRect().left+e.offsetWidth/2}px`,t.style.top=`${e.getBoundingClientRect().top+e.offsetHeight/2}px`,t.style.width=0,t.style.height=0,t.style.opacity=0,setTimeout((()=>{let o=e.getAttribute("data-amount")?parseInt(e.getAttribute("data-amount")):0;e.setAttribute("data-amount",o+1),t.remove()}),500)}}))}()})),window.FLS=!1,document.querySelector(".icon-menu")&&document.addEventListener("click",(function(s){t&&s.target.closest(".icon-menu")&&(((t=500)=>{document.documentElement.classList.contains("lock")?e(t):o(t)})(300),document.documentElement.classList.toggle("menu-open"))})),function(){n=!0;const t=document.querySelector("header.header"),e=t.hasAttribute("data-scroll-show"),o=t.dataset.scrollShow?t.dataset.scrollShow:500,s=t.dataset.scroll?t.dataset.scroll:1;let c,r=0;document.addEventListener("windowScroll",(function(n){const a=window.scrollY;clearTimeout(c),a>=s?(!t.classList.contains("_header-scroll")&&t.classList.add("_header-scroll"),e&&(a>r?t.classList.contains("_header-show")&&t.classList.remove("_header-show"):!t.classList.contains("_header-show")&&t.classList.add("_header-show"),c=setTimeout((()=>{!t.classList.contains("_header-show")&&t.classList.add("_header-show")}),o))):(t.classList.contains("_header-scroll")&&t.classList.remove("_header-scroll"),e&&t.classList.contains("_header-show")&&t.classList.remove("_header-show")),r=a<=0?0:a}))}()})();